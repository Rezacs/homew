{% extends "class_base.html" %}

{% load static %}

{% block content %}
    <h1>salam</h1>
    <div class="col-md-12 ">
            <div class="row mt-1 g-3 btn-light " style="height: 100%;">
                {% for post in posts %}
                    <div class="col-md-4 " style="height: auto; border: 1px solid red;">
                        {% if post.image %}
                            <img src="{{post.image.url}}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red;">
                        {% else %}
                            <img src="{% static 'download.jpeg' %}" alt="image_of_post" style="width: 100px; height: 100px; border: solid red;">
                        {% endif %}
                        <br>
                        <h1>{{post.title}}</h1>
                        <p>{{post.shortdesc}}</p>
                        <small>{{post.created_on | date}}</small>
                        <a href="/user/{{post.writer}}"><h2>user : {{post.writer}}</h2></a>
                        <!-- <h3>{{post.tag}}</h3> -->
                        <p>
                            tags :
                            {% for t in post.tag.all  %}
                                {{t}}-
                            {% endfor %}
                        </p>
                        <p>
                            <a href="class_post_detail/{{post.id}}">show detail</a>
                            <br>
                            <a href="class_category_posts/gslug/{{post.slug}}">show detail via SLUG </a>
                        </p>
                        <hr>
                    </div>
                {% endfor %}
            </div>
    </div>

    <section class="py-5">
        <div class="container px-4 px-lg-5 mt-5">
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
                <div class="col mb-5">
                    <div class="card h-100">
                        <!-- Product image-->
                        <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
                        <!-- Product details-->
                        <div class="card-body p-4">
                            <div class="text-center">
                                <!-- Product name-->
                                <h5 class="fw-bolder">Fancy Product</h5>
                                <!-- Product price-->
                                $40.00 - $80.00
                            </div>
                        </div>
                        <!-- Product actions-->
                        <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
                            <div class="text-center"><a class="btn btn-outline-dark mt-auto" href="#">View options</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
      
{% endblock content %}


<!DOCTYPE html>
<html lang="fa" >
<head>
  <title>js</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="static/style-theme.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

    <h1 id="js-sample"></h1>
    <div class="container">
        <button class="btn btn-success" type="click" onclick=" document.getElementById('time').innerHTML =Date()">what time is it ?  </button>
        <p id="time"></p>
        <div class="row">
            <div class="col-md-12" style="min-height: 250px;">
                <img  id="test-img" src="static/img/feragh.jpg" alt="">

            </div>
            <button class="btn btn-danger" type="click" onclick=" document.getElementById('test-img').style.display ='none'">delete image</button>
            <button class="btn btn-success" type="click" onclick=" document.getElementById('test-img').style.display ='block'">show image</button>
            <p> sum 5 + 10  = <span id="res"></span></p>
        </div>
        <p id="demo"></p>
        <button class="btn btn-warning" onclick="document.getElementById('demo').innerHTML = Date()">The time is?</button>
        <button class="btn btn-warning" onclick="this.innerHTML = Date()">The time is?</button>
        <button class="btn btn-warning" onclick="firstFun()">test function</button>
        <button class="btn btn-success" id="statusBtn"  onclick="setAttr()">enable </button>

        <div class="col-md-12">
            
            <hr>
            <table class="table responsive">
                <thead>
                    <th>id</th>
                    <th>name</th>
                    <th>lastname</th>
                    <th>address</th>
                    <th>status</th>
                    <th>edit</th>
                    <th>delete</th>
                    <th>copy</th>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>
                            <button type="submit" class="btn btn-success"> enable</button>
                        </td>
                        <td>
                            <!-- <button class="btn btn-primary">edit</button> -->
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" onclick="edit_row_table(this)" >
                                modal
                             </button>
                        </td>
                        <td>
                            <span class="btn btn-danger" onclick="delete_row_table(this)">delete</span>
                        </td>
                        <td>
                            <button class="btn btn-secondary"> copy</button>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>
                            <button type="submit" class="btn btn-warning"> not set</button>
                        </td>
                        <td>
                            <!-- <button class="btn btn-primary">edit</button> -->
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                                modal
                             </button>
                        </td>
                        <td>
                            <span class="btn btn-danger" onclick="delete_row_table(this)">delete</span>
                        </td>
                        <td>
                            <button class="btn btn-secondary"> copy</button>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>alex</td>
                        <td>
                            <button type="submit" class="btn btn-danger"> diable</button>
                        </td>
                        <td>
                            <!-- <button class="btn btn-primary">edit</button> -->
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                                modal
                             </button>
                        </td>
                        <td>
                            <span class="btn btn-danger" onclick="delete_row_table(this)">delete</span>
                            
                        </td>
                        <td>
                            <button class="btn btn-secondary"> copy</button>
                        </td>
                    </tr>
                    
                </tbody>
            </table>
            نام خود را وارد کنید: <input type="text" id="fname" onchange="upperCase()">
            <small>تبدیل حروف کوچک انگلیسی به حروف برزگ</small>
            <hr>
            <div class="row">
                
                <div class="col-9">
                    <h3>تغییر عکس </h3>
                    <small>با استفاده از addEventListener</small>
                    <img class="thumbnail w-100" id="change-img-section" src="static/img/b.jpeg" alt="" > <br>   
                </div>
                <div class="col-3">

                    <button class="btn btn-secondary change-img" id="change-img" >change img</button>
                </div>
               
            </div>
            <hr>
        </div>



        <div class="col-12">
          
            <div class="col-md-6">
                <h3>لینک دونی</h3>
               <div class="card" style="width: 18rem;">
                   <ul class="list-group list-group-flush">
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_events.asp">js event</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_strings.asp">js string</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_string_templates.asp">${}</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_number_methods.asp">parseInt/pasreFloat</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_array_methods.asp">array method</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_array_iteration.asp">map/filter</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_htmldom_events.asp">event sample</a>
                     </li>
                     <li class="list-group-item">
                         <a href="https://www.w3schools.com/js/js_htmldom_eventlistener.asp">The addEventListener() method</a>
                     </li>
                   </ul>
                 </div>
            </div>
        </div>

    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              ...
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    <!-- End Modal -->
<script>
    var a = "maktab sharif"
    document.getElementById('js-sample').innerHTML ='سلام'    
    document.getElementById('test-img').style.width ='100%';    
    document.getElementById('test-img').style.height ='250px';    
    document.getElementById('res').innerHTML = 5+10   
    
    // window.alert(5 + 6);

    function firstFun(){
        console.log('test functon')
        document.getElementById('demo').innerHTML = Date()
    }
    function setAttr(){
        console.log('test functon',)
        btn  =document.getElementById('statusBtn')
        
        if(btn.getAttribute('status') == "disable"){
            btn.innerHTML = 'enable'
            btn.setAttribute('status','enable')
            btn.classList.remove("btn-danger");
            btn.classList.add("btn-success");
        }
        else {
            btn.innerHTML = 'disable'
            btn.setAttribute('status','disable')
            
            btn.classList.remove("btn-success");
            btn.classList.add("btn-danger");
        }    
        console.log(btn.getAttribute('status'))

    }
    function delete_row_table(that){
        console.log('maktab')
        
        console.log('this ',that.classList)
        console.log(that.closest('tr'))
        that_tr = that.closest('tr').remove()
        // alert('row remove ')
    }

    function edit_row_table(that){
       
        console.log(that)
        that_tr = that.closest('tr')
        console.log(that.closest('tr'))
        modal_body = document.getElementsByClassName('modal-body')
        paragraph = document.createElement("p");

        // node = document.createTextNode("This is new.");
        // paragraph.appendChild(node);
        // modal_body[0].appendChild(paragraph)
        td_1 = that_tr.getElementsByTagName('td')[0].innerText
        td_2 = that_tr.getElementsByTagName('td')[1].innerText
        td_3 = that_tr.getElementsByTagName('td')[2].innerText
        td_4 = that_tr.getElementsByTagName('td')[3].innerText
        node = document.createTextNode(td_1 + " " + td_2+ " "+ td_3 + " "+ td_4);
        paragraph.appendChild(node);
        modal_body[0].appendChild(paragraph)
    }
    function upperCase() {
        const x = document.getElementById("fname");
        x.value = x.value.toUpperCase();
    }

    // اگر این خط فعال کنیم مشکلی پیش میاد
    // document.getElementsByClassName('change-img').addEventListener('click',change_img)
    document.getElementById('change-img').addEventListener('click',change_img)

    function change_img(){
        console.log('testtttttttttttttttt')
        
        src  = document.getElementById('change-img-section').getAttribute('src') 
        console.log('old src',src)
        new_src = "static/img/i.png"
        document.getElementById('change-img-section').setAttribute('src',new_src)


    }
 
</script>

</body>
</html>